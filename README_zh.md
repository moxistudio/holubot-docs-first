# HoluBot — 有边界的 Bot

> AI Agent 生态的治理与调度层。  
> 路由、审批、审计、管控——让你的 Agent 保持强大，但不失控。

[[English](README.md)] [[白皮书](docs/WHITEPAPER_ZH.md)]

---

**问题已经发生了。** AI Agent 越来越强大——也越来越危险。Agent 技能市场 36% 的 Skill 存在安全缺陷，43% 的 MCP 服务器有命令注入漏洞。生产数据库被删除，凭证明文泄露，Agent 从 GitHub Issue 下载并执行了恶意软件。这些都是 2025 年真实发生的事故。

**HoluBot 的核心判断：** AI Agent 的问题不是不够聪明，而是缺少管理。HoluBot 是一个轻量级的**控制面（Control Plane）**，架在任何 Agent 后端前面，负责意图路由、信任分级、记忆治理和可审计的执行——同时保持自身永远不胖（几百行 Python，CI 强制门禁）。

---

## 快速开始

1. 先看治理模型白皮书：[`docs/WHITEPAPER_ZH.md`](docs/WHITEPAPER_ZH.md)
2. 再看公开 Agent 合约：[`docs/AGENT_SPEC.md`](docs/AGENT_SPEC.md)
3. 复制最小模板并按你的流程改造：[`examples/standup_agent/agent.yaml`](examples/standup_agent/agent.yaml)

---

## 工作原理

```
┌──────────────────────────────────────────────────┐
│                  用户触点                          │
│     Telegram · Discord · 飞书 · （更多渠道）        │
└──────────────────┬───────────────────────────────┘
                   │
┌──────────────────▼───────────────────────────────┐
│                                                    │
│        HoluBot · 控制面                             │
│        （200–500 行 Python）                        │
│                                                    │
│   • 意图分类 → 自己回答 or 路由给后端                  │
│   • 信任分级（auto / confirm / always_confirm）       │
│   • 共享长期记忆（可治理、可审计）                      │
│   • 高风险操作审批拦截                                │
│   • 全操作 append-only 审计日志                      │
│   • 全后端 + 全通道健康检查                           │
│                                                    │
└──────────────────┬───────────────────────────────┘
                   │
           AgentAdapter（可插拔）
                   │
     ┌─────────────┼──────────────┐
     ▼             ▼              ▼
 ┌────────┐  ┌─────────┐  ┌───────────┐
 │ 周报    │  │ 内容创作 │  │  代码助手  │  ... 新增 Agent
 │ Agent  │  │ Agent   │  │  Agent    │      无需改前台
 └────────┘  └─────────┘  └───────────┘
```

**控制面永远不胖。** 无论后面接多少 Agent、多少 Skill、多少 MCP，前台代码量始终锁定在几百行。膨胀了就是走偏了。

---

## 为什么选 HoluBot

| | 典型 Agent 框架 | HoluBot |
|---|---|---|
| **信任模型** | 默认全权自治 | 分级放权 — `auto` / `confirm` / `always_confirm` |
| **成本** | 每条消息全量加载（"早上好"也要 ~13k tokens） | 轻前台直接回答 80% 消息（~100 tokens） |
| **安全** | 开放技能市场（36% 有缺陷） | 三层导入审核，不做开放市场 |
| **故障模式** | 静默降级（"AI 变笨了但不知道为什么"） | 所有异常对用户透明，绝不静默吞掉 |
| **架构** | 单体进程，一个插件出事全局受影响 | 控制面 + 独立后端，隔离故障域 |
| **后端锁定** | 绑定单一框架 | AgentAdapter 抽象层，换后端不改前台 |

---

## 生态定位

HoluBot **不是**又一个 Agent 框架，而是它们的治理补充层。

- **搭配 OpenClaw / CoPaw：** 把 HoluBot 架在前面做治理层——获得审批、成本控制和审计能力，同时保留它们的执行力。
- **搭配 CLI Agent（Claude Code / Qwen Code 等）：** HoluBot 通过 AgentAdapter 接口将任务路由给它们。
- **独立使用：** 用内置 Skill 引擎运行结构化工作流，不需要重型后端。

## HoluBot 不是什么

- 不是一个“全权自治且静默执行高风险动作”的万能 Agent。
- 不是一个开放式、无审查的第三方 Skill 市场。
- 不是替代你后端执行框架的产品，而是架在前面的治理层。

---

## Agent 规范

每个自定义 Agent 由一个 `agent.yaml` 定义：

```yaml
# 最简示例——10 行定义一个站会助手
meta:
  name: "站会助手"
  id: "standup"

trigger:
  keywords: ["站会", "standup", "今天计划"]

steps:
  - id: "ask"
    action: "llm_call"
    prompt: |
      你是站会助手。请问用户三个问题：
      1. 昨天做了什么？
      2. 今天计划做什么？
      3. 有没有什么阻塞？
      根据回答整理成简洁的站会纪要。
```

其他字段（人格、信任等级、模型、执行器）全部使用默认值。更多示例见 [`examples/`](examples/)。

---

## 项目状态

> **阶段：文档先行开源预览**

本仓库当前包含架构文档、Agent 规范和示例。核心代码正在稳定性验证中，将逐步发布。

| 现在已有 | 即将到来 |
|---|---|
| ✅ 脱敏白皮书（[中文](docs/WHITEPAPER_ZH.md)） | 🔜 核心网关代码（~500 行） |
| ✅ Agent YAML 规范 + 示例 | 🔜 Token 成本实测基准 |
| ✅ 架构设计原则 | 🔜 三层安全审核引擎 |
| ✅ 路线图 | 🔜 Docker 一键部署 |

**Star 本仓库** 关注后续进展。首个可运行版本预计数周内发布。

---

## 设计原则

1. **前台永远不胖。** 几百行，CI 强制。只做路由和治理。
2. **Skill 驱动，降低模型依赖。** 结构化 SOP 告诉 AI 每一步做什么，便宜模型也能输出一致结果。
3. **信任是人给的，不是 AI 争取的。** 新工作流默认要确认。连续成功 10 次后，由用户（不是 AI）决定是否升级信任。
4. **绝不静默失败。** 后端宕了？模型降级了？Token 过期了？用户永远有权知道。

---

## 参与贡献

项目处于早期阶段，非常欢迎反馈、想法和讨论——请提 [Issue](https://github.com/moxistudio/holubot-docs-first/issues) 或发起 [Discussion](https://github.com/moxistudio/holubot-docs-first/discussions)。

核心代码发布后将开放代码贡献。

---

## 许可证

[MIT](LICENSE)

---

<p align="center">
  <i>轻量是手段，治理才是价值。</i>
</p>
